<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A humble mocking library for Kotlin, KotlinJS and Kotlin Multiplatform using Kotlin Symbol Processing (KSP)."><meta name=author content="Matthias Geisler"><link href=https://bitpogo.github.io/kmock/0.3.0-rc03/howto/proxy/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.3.9"><title>Using Mocks - KMock</title><link rel=stylesheet href=../../assets/stylesheets/main.1d29e8d0.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><link rel=stylesheet href=../../assets/extra.css><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=indigo data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#using-mocks class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=KMock class="md-header__button md-logo" aria-label=KMock data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KMock </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Using Mocks </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=indigo data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/bitPogo/kmock title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> bitPogo/kmock </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=KMock class="md-nav__button md-logo" aria-label=KMock data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> KMock </label> <div class=md-nav__source> <a href=https://github.com/bitPogo/kmock title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> bitPogo/kmock </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../roadmap/ class=md-nav__link> Roadmap </a> </li> <li class=md-nav__item> <a href=../../concept/ class=md-nav__link> Concept </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> How To <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="How To" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> How To </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install/ class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../setup/ class=md-nav__link> Setup </a> </li> <li class=md-nav__item> <a href=../terminology/ class=md-nav__link> Terminology </a> </li> <li class=md-nav__item> <a href=../annotations/ class=md-nav__link> Declaring a Mock </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Using Mocks <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Using Mocks </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#before-you-start class=md-nav__link> Before you start </a> </li> <li class=md-nav__item> <a href=#proxies class=md-nav__link> Proxies </a> </li> <li class=md-nav__item> <a href=#funproxies class=md-nav__link> FunProxies </a> </li> <li class=md-nav__item> <a href=#propertyproxies class=md-nav__link> PropertyProxies </a> </li> <li class=md-nav__item> <a href=#receiverproxies class=md-nav__link> ReceiverProxies </a> </li> <li class=md-nav__item> <a href=#the-kmock-factory class=md-nav__link> The KMock Factory </a> </li> <li class=md-nav__item> <a href=#teardown class=md-nav__link> Teardown </a> </li> <li class=md-nav__item> <a href=#experimental-proxy-access-methods class=md-nav__link> Experimental Proxy Access Methods </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../assertion/ class=md-nav__link> Assertion/Verification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Development data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/code-of-conduct/ class=md-nav__link> Code of Conduct </a> </li> <li class=md-nav__item> <a href=../../development/contributing/ class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href=../../development/releasing/ class=md-nav__link> Releasing </a> </li> <li class=md-nav__item> <a href=../../development/badges/ class=md-nav__link> Badges </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../migration/ class=md-nav__link> Migration Guide </a> </li> <li class=md-nav__item> <a href=../../security/ class=md-nav__link> Security Policy </a> </li> <li class=md-nav__item> <a href=../../license/ class=md-nav__link> License </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#before-you-start class=md-nav__link> Before you start </a> </li> <li class=md-nav__item> <a href=#proxies class=md-nav__link> Proxies </a> </li> <li class=md-nav__item> <a href=#funproxies class=md-nav__link> FunProxies </a> </li> <li class=md-nav__item> <a href=#propertyproxies class=md-nav__link> PropertyProxies </a> </li> <li class=md-nav__item> <a href=#receiverproxies class=md-nav__link> ReceiverProxies </a> </li> <li class=md-nav__item> <a href=#the-kmock-factory class=md-nav__link> The KMock Factory </a> </li> <li class=md-nav__item> <a href=#teardown class=md-nav__link> Teardown </a> </li> <li class=md-nav__item> <a href=#experimental-proxy-access-methods class=md-nav__link> Experimental Proxy Access Methods </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/bitPogo/kmock/tree/main/docs/src/howto/proxy.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=using-mocks>Using Mocks<a class=headerlink href=#using-mocks title="Permanent link">&para;</a></h1> <h2 id=before-you-start>Before you start<a class=headerlink href=#before-you-start title="Permanent link">&para;</a></h2> <p>Once you have declared the Mocks you are going to use, please run your test suite once. (Even if you have no meaningful tests defined yet.) This triggers the Code Generation of Mocks and you may benefit from autocompletion in your Editor or IDE right away. All Mocks (including Multi Interface Mocks) end on<code>Mock</code> to ensure a unified way to reference them.</p> <h2 id=proxies>Proxies<a class=headerlink href=#proxies title="Permanent link">&para;</a></h2> <p>KMock will add double members - <strong>Proxy Properties</strong> - (do not confuse them with <strong>PropertyProxies</strong>) to the generated Mock. All Proxy Properties are named with leading <code>_</code> followed by the Templates original name. In case Templates are overloaded the proxy names will get additional suffix lead by <code>With</code> and derived from the Templates arguments types to ensure its uniqueness as much as possible. In case there is are still collisions you have additional options via KMocks <a href=../setup/ >Gradle Plugin Extension</a></p> <p>KMock in general distinguishes between PropertyProxies and FunProxies, which are referring to either to properties or methods of a Template.</p> <h2 id=funproxies>FunProxies<a class=headerlink href=#funproxies title="Permanent link">&para;</a></h2> <p>FunProxies don't differentiate between asynchronous and synchronous in their API. Therefore anything works for both modi alike. KMock offers a simple way to facilitate stubbing. Consider following source: <div class=highlight><pre><span></span><code><span class=kd>interface</span><span class=w> </span><span class=nc>SampleRemoteRepository</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>fetch</span><span class=p>(</span><span class=n>url</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=kt>Any</span><span class=w></span>
<span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>find</span><span class=p>(</span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=kt>Any</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> You can deal with the resulting Mock for example like this: <div class=highlight><pre><span></span><code><span class=nd>@Test</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>   </span><span class=c1>// arrange</span><span class=w></span>
<span class=w>   </span><span class=kd>val</span><span class=w> </span><span class=nv>someInstance</span><span class=p>:</span><span class=w> </span><span class=n>SampleRemoteRepositoryMock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>()</span><span class=w></span>

<span class=w>   </span><span class=n>someInstance</span><span class=p>.</span><span class=na>_fetch</span><span class=p>.</span><span class=na>returnValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>Any</span><span class=p>()</span><span class=w></span>
<span class=w>   </span><span class=n>someInstance</span><span class=p>.</span><span class=na>_find</span><span class=w> </span><span class=n>returns</span><span class=w> </span><span class=s>&quot;any&quot;</span><span class=w></span>

<span class=w>   </span><span class=c1>// act</span><span class=w></span>
<span class=w>   </span><span class=kd>val</span><span class=w> </span><span class=nv>someOtherInstance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SomeClass</span><span class=p>(</span><span class=n>someInstance</span><span class=p>)</span><span class=w></span>
<span class=w>   </span><span class=n>someOtherInstance</span><span class=p>.</span><span class=na>execute</span><span class=p>()</span><span class=w></span>
<span class=w>   </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <p>In short KMock allows to assign canned values which are returned once the Template Method is invoked. In case you need a more elaborate behaviour you can use SideEffects: <div class=highlight><pre><span></span><code><span class=nd>@Test</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>   </span><span class=c1>// arrange</span><span class=w></span>
<span class=w>   </span><span class=kd>val</span><span class=w> </span><span class=nv>someInstance</span><span class=p>:</span><span class=w> </span><span class=n>SampleRemoteRepositoryMock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>()</span><span class=w></span>

<span class=w>   </span><span class=n>someInstance</span><span class=p>.</span><span class=na>_fetch</span><span class=w> </span><span class=n>run</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>       </span><span class=n>delay</span><span class=p>(</span><span class=m>20</span><span class=p>)</span><span class=w></span>
<span class=w>       </span><span class=k>return</span><span class=w> </span><span class=kt>Any</span><span class=p>()</span><span class=w></span>
<span class=w>   </span><span class=p>}</span><span class=w></span>

<span class=w>   </span><span class=n>someInstance</span><span class=p>.</span><span class=na>_find</span><span class=p>.</span><span class=na>sideEffect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>-&gt;</span><span class=w></span>
<span class=w>       </span><span class=k>return</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>.</span><span class=na>isEmpty</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>           </span><span class=k>throw</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>()</span><span class=w></span>
<span class=w>       </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>           </span><span class=kt>Any</span><span class=p>()</span><span class=w></span>
<span class=w>       </span><span class=p>}</span><span class=w></span>
<span class=w>   </span><span class=p>}</span><span class=w></span>

<span class=w>   </span><span class=c1>// act</span><span class=w></span>
<span class=w>   </span><span class=kd>val</span><span class=w> </span><span class=nv>someOtherInstance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SomeClass</span><span class=p>(</span><span class=n>someInstance</span><span class=p>)</span><span class=w></span>
<span class=w>   </span><span class=n>someOtherInstance</span><span class=p>.</span><span class=na>run</span><span class=p>()</span><span class=w></span>
<span class=w>   </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <p>You can use the following properties of FunProxies:</p> <table> <thead> <tr> <th>Property</th> <th>What it does</th> </tr> </thead> <tbody> <tr> <td><code>returnValue</code></td> <td>The Proxy will return the always the given value.</td> </tr> <tr> <td><code>returnValues</code></td> <td>The Proxy will return each value of the given list.<br> If only one value is left it will return it until the run is completed.</td> </tr> <tr> <td><code>error</code></td> <td>The Proxy will throw the given error/exception.</td> </tr> <tr> <td><code>errors</code></td> <td>The Proxy will throw each value of the given list.<br> If only one error/exception is left it will throw it until the run is completed.</td> </tr> <tr> <td><code>sideEffect</code></td> <td>The Proxy will execute the given SideEffect and returns its result.</td> </tr> <tr> <td><code>sideEffects</code></td> <td>The Proxy will execute each SideEffect and returns its result. <br> If only one SideEffect is left it will execute it until the run is completed.</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Please be aware there is a precedence of invocation. <code>errors</code> is used over <code>error</code>, <code>returnValue</code> is used over <code>errors</code>, <code>returnValues</code> is used over <code>returnValues</code>, <code>sideEffect</code> is used over <code>returnValues</code> and <code>sideEffects</code> is used over <code>sideEffect</code>. If no behaviour is set the Proxy simply fails and acts therefore intrusively.</p> </div> <p>Additionally you can use the following infix methods to mutate its values:</p> <table> <thead> <tr> <th>Method</th> <th>What it does</th> </tr> </thead> <tbody> <tr> <td><code>returns</code></td> <td>Alias setter of <code>returnValue</code>.<br>The Proxy will return the always the given value.</td> </tr> <tr> <td><code>returnsMany</code></td> <td>Alias setter of <code>returnValues</code>.<br>The Proxy will return each value of the given list.<br> If only one value is left it will return it until the run is completed.</td> </tr> <tr> <td><code>throws</code></td> <td>Alias setter of <code>error</code>.<br>The Proxy will throw the given error/exception.</td> </tr> <tr> <td><code>throwsMany</code></td> <td>Alias setter of <code>errors</code>.<br>The Proxy will throw each value of the given list.<br> If only one error/exception is left it will throw it until the run is completed.</td> </tr> <tr> <td><code>run</code></td> <td>Alias setter of <code>sideEffect</code>.<br>The Proxy will execute the given SideEffect and returns its result.</td> </tr> <tr> <td><code>runs</code></td> <td>Alias setter of <code>sideEffects</code>.<br>The Proxy will execute each SideEffect and returns its result. <br> If only one SideEffect is left it will execute it until the run is completed.</td> </tr> </tbody> </table> <p>A last word to SideEffects. While they in general using the signature of the Template and therefore you can utilize the full power of the Kotlin's type system, there is 2 exceptions to this. If you work with <a href=https://kotlinlang.org/docs/generics.html>Multi-Boundary Generics</a> and declare them on Method level KMock cannot derive a certain type, since Kotlin has no Union Types per se. The same goes for recursive types as well (e.g. <code>T : Comparable&lt;T&gt;</code>). Those types are derived as <code>Any</code> and you have to make sure to cast them correctly if you use them.</p> <h2 id=propertyproxies>PropertyProxies<a class=headerlink href=#propertyproxies title="Permanent link">&para;</a></h2> <p>PropertyProxies work in a very similar fashion as FunProxies. Consider following source: <div class=highlight><pre><span></span><code><span class=kd>interface</span><span class=w> </span><span class=nc>SampleDomainObject</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>id</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=w></span>
<span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nv>something</span><span class=p>:</span><span class=w> </span><span class=kt>Int</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <p>In short KMock allows to assign simple canned values which are returned once the Template Property is invoked: <div class=highlight><pre><span></span><code><span class=nd>@Test</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>   </span><span class=c1>// arrange</span><span class=w></span>
<span class=w>   </span><span class=kd>val</span><span class=w> </span><span class=nv>someInstance</span><span class=p>:</span><span class=w> </span><span class=n>SampleDomainObjectMock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>()</span><span class=w></span>

<span class=w>   </span><span class=n>someInstance</span><span class=p>.</span><span class=na>_id</span><span class=p>.</span><span class=na>getValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Any&quot;</span><span class=w></span>
<span class=w>   </span><span class=n>someInstance</span><span class=p>.</span><span class=na>_something</span><span class=p>.</span><span class=na>set</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=o>-&gt;</span><span class=w></span>
<span class=w>       </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=m>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>           </span><span class=k>throw</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>()</span><span class=w></span>
<span class=w>       </span><span class=p>}</span><span class=w></span>
<span class=w>   </span><span class=p>}</span><span class=w></span>

<span class=w>   </span><span class=c1>// act</span><span class=w></span>
<span class=w>   </span><span class=kd>val</span><span class=w> </span><span class=nv>someOtherInstance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SomeClass</span><span class=p>()</span><span class=w></span>
<span class=w>   </span><span class=n>someOtherInstance</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>someInstance</span><span class=p>)</span><span class=w></span>
<span class=w>   </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <p>Property Setters are always using SideEffects but work completely non intrusive and have no need for a explicit setup. Property Getters can be use either stub values or a SideEffect. Both - Setter and Getter - do not allow multiple SideEffects since this should be considered as a clear sign that the usage of method is more appropriate instead.</p> <p>PropertyProxies have the following properties:</p> <table> <thead> <tr> <th>Property</th> <th>What it does</th> </tr> </thead> <tbody> <tr> <td><code>getValue</code></td> <td>The Proxy will return the always the given value.</td> </tr> <tr> <td><code>getValues</code></td> <td>The Proxy will return each value of the given list.<br> If only one value is left it will return it until the run is completed.</td> </tr> <tr> <td><code>get</code></td> <td>The Proxy will execute the given SideEffect and return its result.</td> </tr> <tr> <td><code>set</code></td> <td>The Proxy will execute the given SideEffect.</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Please be aware there is a precedence of invocation. <code>getValues</code> is used over <code>getValue</code> and <code>get</code> is used over <code>getValues</code>. If no behaviour is set the Proxy simply fails and acts intrusively.</p> </div> <p>Additionally you can use the following infix methods to set values:</p> <table> <thead> <tr> <th>Method</th> <th>What it does</th> </tr> </thead> <tbody> <tr> <td><code>returns</code></td> <td>Alias setter of <code>getValue</code>.<br> Proxy will return the always the given value.</td> </tr> <tr> <td><code>returnsMany</code></td> <td>Alias setter of <code>getValues</code>.<br> Proxy will return each value of the given list.<br> If only one value is left it will return it until the run is completed.</td> </tr> <tr> <td><code>runOnGet</code></td> <td>Alias setter of <code>get</code>.<br> Proxy will execute the given SideEffect and return its result.</td> </tr> <tr> <td><code>runOnSet</code></td> <td>Alias setter of <code>set</code>.<br> Proxy will execute the given SideEffect.</td> </tr> </tbody> </table> <h2 id=receiverproxies>ReceiverProxies<a class=headerlink href=#receiverproxies title="Permanent link">&para;</a></h2> <p>While receivers are technically not a special type of Proxy they are still special. KMock will do what the compiler does with them and sees them as methods regardless if they are a property or not. The first argument of those methods will be always the type of the Receiver. In case the Template is a Property Receiver, KMock generates one or two methods which depends on the mutability of the Template Receiver. Additionally the generated Proxy is suffixed with <code>Getter</code>/<code>Setter</code>. In case the Template is a Method Receiver, KMock will just suffix the name with an additional <code>Receiver</code>. Unlike other libraries this makes it possible to access Receivers directly without the need of any workaround to reference them.</p> <h2 id=the-kmock-factory>The KMock Factory<a class=headerlink href=#the-kmock-factory title="Permanent link">&para;</a></h2> <p>As you might already seen at this point KMock generates also Factories to ease the initialization of Mocks. <code>kmock</code> takes 4 arguments: <code>collector</code>, <code>relaxed</code>, <code>relaxUnitFun</code> and <code>freeze</code>. <code>relax</code> and <code>relaxUnitFun</code> determine if relaxing should be used and are false by default. <code>freeze</code> determines which flavour for the Memory Model is used and is true by default if no custom default value is set.</p> <p>In case of Single Interface Mocks and the Template uses Generics an additional argument is mandatory - <code>templateType</code>. This argument takes the KClass of the Template:</p> <div class=highlight><pre><span></span><code><span class=nd>@Test</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=c1>// arrange</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>genericThing</span><span class=p>:</span><span class=w> </span><span class=n>SomethingGenericMock</span><span class=o>&lt;</span><span class=kt>Int</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=n>templateType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SomethingGeneric</span><span class=o>::</span><span class=n>class</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>

<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>In case of Multi-Interface Mocks and a Template uses Generics a additional arguments are mandatory - <code>templateType$Idx</code>. Those type take the KClass of the Templates:</p> <div class=highlight><pre><span></span><code><span class=nd>@Test</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=c1>// arrange</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>genericThing</span><span class=p>:</span><span class=w> </span><span class=n>GenericMultiMock</span><span class=o>&lt;</span><span class=kt>Int</span><span class=p>,</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w> </span><span class=o>*&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=n>templateType0</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SomethingGeneric</span><span class=o>::</span><span class=n>class</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=n>templateType1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>AnythingGeneric</span><span class=o>::</span><span class=n>class</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>

<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>Also KMock will not merge compatible Generic Types, since it cannot be sure if they are independent or not. This means if you reference the Mock you always have to explicitly declare all generics.</p> <h2 id=teardown>Teardown<a class=headerlink href=#teardown title="Permanent link">&para;</a></h2> <p>All Mocks are generated with a <code>_clearMock</code> method which clears all Proxies owned by the Mock. This enables you to use Mocks per test suite and not only per test case:</p> <div class=highlight><pre><span></span><code><span class=nd>@MockCommon</span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=n>SampleInterface</span><span class=o>::</span><span class=n>class</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>)</span><span class=w></span>
<span class=kd>class</span><span class=w> </span><span class=nc>SampleTestSet</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>val</span><span class=w> </span><span class=nv>someInstance</span><span class=p>:</span><span class=w> </span><span class=n>SomeInterfaceMock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>()</span><span class=w></span>

<span class=w>    </span><span class=nd>@AfterTest</span><span class=w></span>
<span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>tearDown</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>someInstance</span><span class=p>.</span><span class=na>_clearMock</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=nd>@Test</span><span class=w></span>
<span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=p>}</span><span class=w></span>
</code></pre></div> <h2 id=experimental-proxy-access-methods>Experimental Proxy Access Methods<a class=headerlink href=#experimental-proxy-access-methods title="Permanent link">&para;</a></h2> <p>0.2.0 KMock introduces a new way to work with Proxies. This is done to provide a more robust way in terms of refactoring. However since those methods need a lot more thought and optimization they are considered as experimental but get hopefully soon in a much more stable state.</p> <table> <thead> <tr> <th>Method</th> <th>What it does</th> </tr> </thead> <tbody> <tr> <td><code>propertyProxyOf</code></td> <td>will reference a PropertyProxy</td> </tr> <tr> <td><code>syncFunProxyOf</code></td> <td>will reference a non suspending FunProxy.</td> </tr> <tr> <td><code>asyncFunProxyOf</code></td> <td>will reference a suspending FunProxy.</td> </tr> </tbody> </table> <p>For example they can used as followed:</p> <div class=highlight><pre><span></span><code><span class=nd>@Test</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=c1>// arrange</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>someInstance</span><span class=p>:</span><span class=w> </span><span class=n>SampleRemoteRepositoryMock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>()</span><span class=w></span>

<span class=w>    </span><span class=n>someInstance</span><span class=p>.</span><span class=na>asyncFunProxyOf</span><span class=p>(</span><span class=n>someInstance</span><span class=o>::</span><span class=n>fetch</span><span class=p>).</span><span class=na>sideEffect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>delay</span><span class=p>(</span><span class=m>20</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kt>Any</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=n>someInstance</span><span class=p>.</span><span class=na>asyncFunProxyOf</span><span class=p>(</span><span class=n>someInstance</span><span class=o>::</span><span class=n>find</span><span class=p>).</span><span class=na>sideEffect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>-&gt;</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>.</span><span class=na>isEmpty</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>()</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=kt>Any</span><span class=p>()</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=c1>// act</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>someOtherInstance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SomeClass</span><span class=p>(</span><span class=n>someInstance</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>someOtherInstance</span><span class=p>.</span><span class=na>run</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>In case you deal with overloaded methods or methods with generics you need to provide those methods a hint, which is composed of the argument types of the Template. Consider following source: <div class=highlight><pre><span></span><code><span class=kd>interface</span><span class=w> </span><span class=nc>SampleGenericRemoteRepositoryMock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>fetch</span><span class=p>():</span><span class=w> </span><span class=kt>Any</span><span class=w></span>
<span class=w>    </span><span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=nf>fetch</span><span class=p>(</span><span class=n>url</span><span class=p>:</span><span class=w> </span><span class=n>T</span><span class=p>):</span><span class=w> </span><span class=kt>Any</span><span class=w></span>
<span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>find</span><span class=p>(</span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=kt>Any</span><span class=w></span>
<span class=w>    </span><span class=kd>fun</span><span class=w> </span><span class=nf>find</span><span class=p>(</span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w> </span><span class=n>code</span><span class=p>:</span><span class=w> </span><span class=kt>Int</span><span class=p>):</span><span class=w> </span><span class=kt>Any</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> Which my be address by: <div class=highlight><pre><span></span><code><span class=nd>@Test</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>sampleTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=c1>// arrange</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>someInstance</span><span class=p>:</span><span class=w> </span><span class=n>SampleGenericRemoteRepositoryMock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>kmock</span><span class=p>()</span><span class=w></span>

<span class=w>    </span><span class=n>someInstance</span><span class=p>.</span><span class=na>asyncFunProxyOf</span><span class=o>&lt;</span><span class=kt>Any</span><span class=o>&gt;</span><span class=p>(</span><span class=n>someInstance</span><span class=o>::</span><span class=n>fetch</span><span class=p>,</span><span class=w> </span><span class=n>hint</span><span class=o>&lt;</span><span class=kt>Any</span><span class=o>&gt;</span><span class=p>()).</span><span class=na>sideEffect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>delay</span><span class=p>(</span><span class=m>20</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kt>Any</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=n>someInstance</span><span class=p>.</span><span class=na>syncFunProxyOf</span><span class=p>(</span><span class=n>someInstance</span><span class=o>::</span><span class=n>find</span><span class=p>,</span><span class=w> </span><span class=n>hint</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span><span class=w> </span><span class=kt>Int</span><span class=o>&gt;</span><span class=p>()).</span><span class=na>sideEffect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>-&gt;</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>.</span><span class=na>isEmpty</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>()</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=kt>Any</span><span class=p>()</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=c1>// act</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>someOtherInstance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SomeClass</span><span class=p>(</span><span class=n>someInstance</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>someOtherInstance</span><span class=p>.</span><span class=na>execute</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <p>While this may sound amazing these access method have their natural limitations due to Kotlin itself. You will not be able to address Receivers in that way. The signature of the Template maybe too ambiguous in certain cases which makes them unable to resolve the correct Proxy. In those cases you may access Proxies directly. Also you may encounter problems with incremental builds when you use expect/actual Aliases. In those cases take a look at <code>preventResolvingOfAliases</code> in the Gradle Plugin <a href=../setup/ >setup</a>.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../annotations/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Declaring a Mock" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Declaring a Mock </div> </div> </a> <a href=../assertion/ class="md-footer__link md-footer__link--next" aria-label="Next: Assertion/Verification" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Assertion/Verification </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 Matthias Geisler </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/bitPogo/kmock target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tracking", "navigation.top"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.6c7ad80a.min.js></script> </body> </html>