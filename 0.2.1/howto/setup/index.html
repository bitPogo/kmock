<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A humble mocking library for Kotlin, KotlinJS and Kotlin Multiplatform using Kotlin Symbol Processing (KSP)."><meta name=author content="Matthias Geisler"><link href=https://bitpogo.github.io/kmock/0.2.1/howto/setup/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.2.15"><title>Setup - KMock</title><link rel=stylesheet href=../../assets/stylesheets/main.c382b1dc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cc9b2e1e.min.css><link rel=stylesheet href=../../assets/extra.css><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=indigo data-md-color-primary data-md-color-accent> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#setup class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=KMock class="md-header__button md-logo" aria-label=KMock data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KMock </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Setup </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=indigo data-md-color-primary data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/bitPogo/kmock title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> bitPogo/kmock </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=KMock class="md-nav__button md-logo" aria-label=KMock data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> KMock </label> <div class=md-nav__source> <a href=https://github.com/bitPogo/kmock title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> bitPogo/kmock </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../roadmap/ class=md-nav__link> Roadmap </a> </li> <li class=md-nav__item> <a href=../../concept/ class=md-nav__link> Concept </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> How To <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="How To" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> How To </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../install/ class=md-nav__link> Installation </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Setup <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Setup </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#mandatory-options class=md-nav__link> Mandatory Options </a> </li> <li class=md-nav__item> <a href=#optional-features class=md-nav__link> Optional Features </a> <nav class=md-nav aria-label="Optional Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#aliases class=md-nav__link> Aliases </a> </li> <li class=md-nav__item> <a href=#build-in-methods class=md-nav__link> Build-In Methods </a> </li> <li class=md-nav__item> <a href=#colliding-method-names class=md-nav__link> Colliding Method Names </a> </li> <li class=md-nav__item> <a href=#spies class=md-nav__link> Spies </a> </li> <li class=md-nav__item> <a href=#spy-on-all class=md-nav__link> Spy on All </a> </li> <li class=md-nav__item> <a href=#spies-only class=md-nav__link> Spies only </a> </li> <li class=md-nav__item> <a href=#enable-interface-references class=md-nav__link> Enable Interface References </a> </li> <li class=md-nav__item> <a href=#default-freezing-behaviour class=md-nav__link> Default Freezing behaviour </a> </li> <li class=md-nav__item> <a href=#disable-factories class=md-nav__link> Disable Factories </a> </li> <li class=md-nav__item> <a href=#custom-annotations-for-shared-sources class=md-nav__link> Custom Annotations for Shared Sources </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#experimental-features class=md-nav__link> Experimental Features </a> <nav class=md-nav aria-label="Experimental Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#custommethodnames class=md-nav__link> CustomMethodNames </a> </li> <li class=md-nav__item> <a href=#proxy-access-methods class=md-nav__link> Proxy Access Methods </a> </li> <li class=md-nav__item> <a href=#fine-grained-proxynames class=md-nav__link> Fine Grained ProxyNames </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../terminology/ class=md-nav__link> Terminology </a> </li> <li class=md-nav__item> <a href=../annotations/ class=md-nav__link> Declaring a Mock </a> </li> <li class=md-nav__item> <a href=../proxy/ class=md-nav__link> Using Mocks </a> </li> <li class=md-nav__item> <a href=../assertion/ class=md-nav__link> Assertion/Verification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Development data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/code-of-conduct/ class=md-nav__link> Code of Conduct </a> </li> <li class=md-nav__item> <a href=../../development/contributing/ class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href=../../development/releasing/ class=md-nav__link> Releasing </a> </li> <li class=md-nav__item> <a href=../../development/badges/ class=md-nav__link> Badges </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../migration/ class=md-nav__link> Migration Guide </a> </li> <li class=md-nav__item> <a href=../../security/ class=md-nav__link> Security Policy </a> </li> <li class=md-nav__item> <a href=../../license/ class=md-nav__link> License </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#mandatory-options class=md-nav__link> Mandatory Options </a> </li> <li class=md-nav__item> <a href=#optional-features class=md-nav__link> Optional Features </a> <nav class=md-nav aria-label="Optional Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#aliases class=md-nav__link> Aliases </a> </li> <li class=md-nav__item> <a href=#build-in-methods class=md-nav__link> Build-In Methods </a> </li> <li class=md-nav__item> <a href=#colliding-method-names class=md-nav__link> Colliding Method Names </a> </li> <li class=md-nav__item> <a href=#spies class=md-nav__link> Spies </a> </li> <li class=md-nav__item> <a href=#spy-on-all class=md-nav__link> Spy on All </a> </li> <li class=md-nav__item> <a href=#spies-only class=md-nav__link> Spies only </a> </li> <li class=md-nav__item> <a href=#enable-interface-references class=md-nav__link> Enable Interface References </a> </li> <li class=md-nav__item> <a href=#default-freezing-behaviour class=md-nav__link> Default Freezing behaviour </a> </li> <li class=md-nav__item> <a href=#disable-factories class=md-nav__link> Disable Factories </a> </li> <li class=md-nav__item> <a href=#custom-annotations-for-shared-sources class=md-nav__link> Custom Annotations for Shared Sources </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#experimental-features class=md-nav__link> Experimental Features </a> <nav class=md-nav aria-label="Experimental Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#custommethodnames class=md-nav__link> CustomMethodNames </a> </li> <li class=md-nav__item> <a href=#proxy-access-methods class=md-nav__link> Proxy Access Methods </a> </li> <li class=md-nav__item> <a href=#fine-grained-proxynames class=md-nav__link> Fine Grained ProxyNames </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/bitPogo/kmock/tree/main/docs/src/howto/setup.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">&para;</a></h1> <h2 id=mandatory-options>Mandatory Options<a class=headerlink href=#mandatory-options title="Permanent link">&para;</a></h2> <p>KMock brings a variety of configuration options. In order to access KMock's extension in Gradle please do the following:</p> <div class=highlight><pre><span></span><code><span class=w>    </span><span class=n>plugins</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=p>...</span><span class=w></span>

<span class=w>        </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;tech.antibytes.kmock.kmock-gradle&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=n>kotlin</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
</code></pre></div> <p>The only <strong>mandatory option</strong> is <code>rootPackage</code>, It expects the root package of <strong>your project</strong> as a String. This information is need in order to arrange the generate Mocks properly.</p> <h2 id=optional-features>Optional Features<a class=headerlink href=#optional-features title="Permanent link">&para;</a></h2> <h3 id=aliases>Aliases<a class=headerlink href=#aliases title="Permanent link">&para;</a></h3> <p>In order to resolve conflicts of mock names KMock allows you make mapping of aliases via <code>aliasNameMapping</code>. It expects a the key of the full qualified name of the Template and as value the Alias as a short name: <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>aliasNameMapping</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mapOf</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=s>&quot;my.root.package.template.alias.Collision&quot;</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=s>&quot;Alias&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <h3 id=build-in-methods>Build-In Methods<a class=headerlink href=#build-in-methods title="Permanent link">&para;</a></h3> <p>KMock will not generate proxies for Build-In methods like hashCode by default in order to avoid unnecessary overhead. However if you need Build-In methods you can tell KMock to generate them via <code>useBuildInProxiesOn</code>. It expects a set of full qualified names of Templates which should have proxies for Build-In methods: <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>useBuildInProxiesOn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>setOf</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=s>&quot;my.root.package.template.alias.BuildInMethods&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <h3 id=colliding-method-names>Colliding Method Names<a class=headerlink href=#colliding-method-names title="Permanent link">&para;</a></h3> <p>If KMock produces a collision of names for overloaded methods you can resolve it via <code>useTypePrefixFor</code>. It expects a map, while the key must be the full qualified name of causing type and the value is an arbitrary String, which is used as a prefix. <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>useTypePrefixFor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mapOf</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=s>&quot;my.root.package.types.overloaded.Scope.Abc&quot;</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=s>&quot;Prefix&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <h3 id=spies>Spies<a class=headerlink href=#spies title="Permanent link">&para;</a></h3> <p>In order to enable Spies for certain Templates, KMock offers you the <code>spyOn</code>. It expects a set of full qualified names of Templates.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This will enable Build-In methods for this particular mock as well.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Spies for Multi-Mocks will triggered if one Interface can be spied on.</p> </div> <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>spyOn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>setOf</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=s>&quot;my.root.package.templates.spy.SpyOnMe&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h3 id=spy-on-all>Spy on All<a class=headerlink href=#spy-on-all title="Permanent link">&para;</a></h3> <p>By default KMock will only activate spies via <code>spyOn</code>. If you simply want to enable spying for all Templates spies you can do that via <code>spyAll</code>: <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>spyAll</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <h3 id=spies-only>Spies only<a class=headerlink href=#spies-only title="Permanent link">&para;</a></h3> <p>If you have no use for Mocks which cannot be spied and you want to spare the compile time of the <code>kmock</code> factories, you may tell this KMock via <code>spiesOnly</code>: <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>spiesOnly</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>spiesOnly</code> will trigger that all Mocks can are spied on like <code>spyAll</code>.</p> </div> <h3 id=enable-interface-references>Enable Interface References<a class=headerlink href=#enable-interface-references title="Permanent link">&para;</a></h3> <p>In order to be able to utilize interfaces for the <code>kmock</code> or <code>kspy</code> factory you can enable this via <code>allowInterfaces</code>:</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>This will be handy if you use it together with Relaxation.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>This will not work for Multi Interface Mocks.</p> </div> <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>allowInterfaces</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h3 id=default-freezing-behaviour>Default Freezing behaviour<a class=headerlink href=#default-freezing-behaviour title="Permanent link">&para;</a></h3> <p>By the default all Mocks are frozen in order to avoid any issues which can occur with Coroutines. If you do not wish that default you can set a new one via <code>freezeOnDefault</code>: <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>freezeOnDefault</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <h3 id=disable-factories>Disable Factories<a class=headerlink href=#disable-factories title="Permanent link">&para;</a></h3> <p>One of the biggest factors in terms of compile time are the generated factories. If you do not mind to wire everything by hand you can disable them via <code>disableFactories</code>:</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>If you do that you are on your own. Also constructors of Mocks are considered as internal. This means do not expect them to have a stable API.</p> </div> <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>disableFactories</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h3 id=custom-annotations-for-shared-sources>Custom Annotations for Shared Sources<a class=headerlink href=#custom-annotations-for-shared-sources title="Permanent link">&para;</a></h3> <p>In order to ease the declaration of Mocks for Shared Sources (e.g. <code>nativeTest</code>) KMock offers you a hook to define custom annotations via <code>customAnnotationsForMeta</code>. It takes a map. The key must be the full qualified name of your Annotation and the value a (valid) Source Set your Annotations is referring to.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Before you ask - no, inheritance does not work with annotations.</p> </div> <div class="admonition important"> <p class=admonition-title>Important</p> <p><code>commonTest</code> as Source Set is not allowed!</p> </div> <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>customAnnotationsForMeta</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mapOf</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=s>&quot;my.root.package.annotation.Native&quot;</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=s>&quot;nativeTest&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h2 id=experimental-features>Experimental Features<a class=headerlink href=#experimental-features title="Permanent link">&para;</a></h2> <p>The following features are considered as experimental, which means there likely be to changed or removed.</p> <h3 id=custommethodnames>CustomMethodNames<a class=headerlink href=#custommethodnames title="Permanent link">&para;</a></h3> <p>Since overloaded method names of Proxies can become very ugly KMock offers you the possibility to rename them via <code>customMethodNames</code>. It expects a map while the key must be the full id of the Proxy you are referring to and the value can be an arbitrary String, which is used as name for the Proxy.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This feature will hurt you if the Template is subject to changes, since you have to adjust the mapping each time.</p> </div> <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>customAnnotationsForMeta</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mapOf</span><span class=p>(</span><span class=w></span>
<span class=w>        </span><span class=s>&quot;my.root.package.template.renamed.OverloadedMock#_foo&quot;</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=s>&quot;bar&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h3 id=proxy-access-methods>Proxy Access Methods<a class=headerlink href=#proxy-access-methods title="Permanent link">&para;</a></h3> <p>In order to enable the experimental ProxyAccessMethods you can switch <code>allowExperimentalProxyAccess</code> to true: <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>allowExperimentalProxyAccess</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <h3 id=fine-grained-proxynames>Fine Grained ProxyNames<a class=headerlink href=#fine-grained-proxynames title="Permanent link">&para;</a></h3> <p>If you have the need of Proxy names which support the full extend of KMP deferring types you can enable <code>enableFineGrainedNames</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>You will not need that if you work with JVM or Android. This flag will you only help withs native sources and JS.</p> </div> <div class=highlight><pre><span></span><code><span class=n>kmock</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=p>...</span><span class=w></span>
<span class=w>    </span><span class=n>rootPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;my.root.package&quot;</span><span class=w></span>
<span class=w>    </span><span class=n>enableFineGrainedNames</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../install/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Installation </div> </div> </a> <a href=../terminology/ class="md-footer__link md-footer__link--next" aria-label="Next: Terminology" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Terminology </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 Matthias Geisler </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/bitPogo/kmock target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tracking", "navigation.top"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.a6c66575.min.js></script> </body> </html>